(self.webpackChunknote=self.webpackChunknote||[]).push([[211],{3516:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return W}});var r=t(2791),o=t(7689),s=t(6459),i={LOGIN:"/login",AUTHENTICATE:{PREFIX:"users",NOTES:"/notes"},HOME:"/"},a=function(){return"/".concat(i.AUTHENTICATE.PREFIX).concat(i.AUTHENTICATE.NOTES)},c=function(){return"".concat(i.LOGIN)},u=t(9434),l=t(4165),d=t(5861),f=t(626),v=t(6433),x=t(6972),p=t(5573),h=function(e){return v.pbkdf2Sync(e,x.Z.getValue(p.Z.REACT_APP_SALT),2048,32,"sha512").toString("hex")},m=t(184),j=function(e){(0,s.Z)(e);var n=(0,u.I0)(),t=(0,o.s0)(),r=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(r){var o,s,i,c,u,d,v;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),o=document.forms[0],s=o.user_name,i=o.password,c=s.value,u=i.value,d=h(u),e.t0=n,e.next=8,(0,f.x)({user_name:c,password:d});case 8:return e.t1=e.sent,e.next=11,(0,e.t0)(e.t1);case 11:if(!(v=e.sent).error){e.next=15;break}return alert(v.error.message),e.abrupt("return");case 15:t(a());case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,m.jsx)("div",{className:"login",children:(0,m.jsxs)("form",{className:"form",onSubmit:r,children:[(0,m.jsx)("input",{className:"input-user-name",name:"user_name",placeholder:"user name",required:!0}),(0,m.jsx)("input",{className:"input-password",name:"password",type:"password",placeholder:"password",required:!0}),(0,m.jsx)("button",{type:"submit",children:"Login"})]})})},g=function(e){(0,s.Z)(e);var n=(0,u.v9)((function(e){return e.loginReducer.isLogged})),t=(0,o.s0)();return(0,r.useEffect)((function(){n&&t(a())}),[]),n?null:(0,m.jsx)(j,{})},N=t(6856),C=t(71),E=t(1759),k=t(7537),T=function(){var e=(0,u.I0)(),n=(0,u.v9)((function(e){return e.notesReducer.notes})),t=(0,u.v9)((function(e){var n;return null===(n=e.notesReducer.currentNote)||void 0===n?void 0:n._id})),r=0===n.length?"notes-delete-empty":"";return(0,m.jsxs)("div",{className:"notes-toolbar-container",children:[(0,m.jsx)(N.F1H,{onClick:function(){e((0,E.f_)(t))},className:"notes-cursor ".concat(r),"aria-disabled":!0}),(0,m.jsx)(C.orQ,{onClick:function(){var n=k.H;e((0,E.kT)(n))},className:"notes-cursor"})]})},b=function(e){var n=e.item,t=(0,u.I0)(),o=(0,u.v9)((function(e){return e.notesReducer.currentNote})),s=n.text,i=n.created_at,a=n.title,c=n._id,l=n.updated_at,d=(0,r.useCallback)((function(){t((0,E.iV)(n))}),[c,l]),f=function(e){return e.length>25?"".concat(e.substring(0,25),"..."):e},v=(null===o||void 0===o?void 0:o._id)===c?"active":"";return(0,m.jsxs)("div",{className:"notes-items notes-cursor ".concat(v),onClick:d,children:[(0,m.jsx)("h4",{className:"notes-margin-0 notes-ff",children:f(a)}),(0,m.jsxs)("div",{className:"notes-body",children:[(0,m.jsx)("span",{className:"notes-margin-0",children:i}),(0,m.jsx)("span",{className:"notes-margin-0 notes-ml-10 notes-cl-gray",children:f(s)})]})]})},A=function(e){(0,s.Z)(e);var n=(0,u.I0)();(0,r.useEffect)((function(){n((0,E.Kk)())}),[]);var t=(0,u.v9)((function(e){return e.notesReducer.notes}));return(0,m.jsxs)("div",{className:"notes-wrapper",children:[(0,m.jsx)("div",{className:"",children:(0,m.jsx)(T,{})}),(0,m.jsx)("div",{className:"notes-container",children:(0,m.jsx)("div",{children:t.map((function(e){return(0,m.jsx)(b,{item:e},e._id)}))})})]})},S=t(885),y=t(2010),w=t(6183),I=(t(3321),t(5088),(0,t(8840).Z)()),Z="header-one",R=function(e){var n=e.id,t=e.editorState,o=e.onChange,s=(0,r.useCallback)((function(e){e.getCurrentContent().equals(t.getCurrentContent())||o(i(e))}),[n]),i=function(e){var n=e.getCurrentContent().getBlockMap().first().getKey();return e.getSelection().getAnchorKey()===n!==(y.RichUtils.getCurrentBlockType(e)===Z)?y.RichUtils.toggleBlockType(e,Z):e};return(0,m.jsx)(w.ZP,{editorState:t,onChange:s,plugins:[I]})},_=t(5095),H=t.n(_),L=function(e){var n=e.editorState,t=e.currentNote,o=e.onChangeEditor,s=t._id,i=(0,u.I0)();(0,r.useEffect)((function(){if(t.content){var e=y.EditorState.createWithContent((0,y.convertFromRaw)(JSON.parse(t.content)));o(e)}else o(y.EditorState.createEmpty())}),[s]);var a=H()((function(e){var n=c(e);i((0,E.Qk)(n))}),100),c=function(e){var n,t=(0,y.convertToRaw)(e.getCurrentContent());return t&&0!==t.blocks.length?{title:t.blocks[0].text||k.H.title,text:(null===(n=t.blocks[1])||void 0===n?void 0:n.text)||k.H.text,content:JSON.stringify(t),_id:s}:null};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("label",{className:"editor-lbl-created-at",children:null===t||void 0===t?void 0:t.updated_at}),(0,m.jsx)("div",{className:"editor-wrap-draftjs",children:(0,m.jsx)(R,{id:s,editorState:n,onChange:function(e){a(e),o(e)}})})]})},O=t(9126),U=function(e){var n=e.editorState,t=e.onChangeEditor,r=(0,u.I0)(),s=(0,o.s0)(),i=function(e,n){if(e.stopPropagation(),e.preventDefault(),0!==e.target.files.length){var t=e.target.files[0];a(t,(function(e){n(e)}))}},a=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(n,t){var r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=new FileReader).readAsDataURL(n),r.onload=function(){t(r.result)},r.onerror=function(e){return e};case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(e,n){var t=e.getCurrentContent().createEntity("image","IMMUTABLE",{src:n}),r=t.getLastCreatedEntityKey(),o=y.EditorState.set(e,{currentContent:t});return y.AtomicBlockUtils.insertAtomicBlock(o,r," ")};return(0,m.jsxs)("div",{className:"editor-toolbar-container",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"file",children:(0,m.jsx)(O.jnY,{className:"editor-cursor"})}),(0,m.jsx)("input",{onChange:function(e){i(e,(function(e){var r=v(n,e);t(r)}))},type:"file",id:"file",style:{display:"none"}})]}),(0,m.jsx)("button",{onClick:function(){r((0,f.k)()),s(c())},className:"btn-logout",children:"Logout"})]})},F=function(e){(0,s.Z)(e);var n=(0,u.v9)((function(e){return e.notesReducer.currentNote})),t=(0,r.useState)((function(){return y.EditorState.createEmpty()})),o=(0,S.Z)(t,2),i=o[0],a=o[1],c=function(e){a(e)};return(0,m.jsxs)("div",{className:"editor-container",children:[(0,m.jsx)("div",{children:(0,m.jsx)(U,{onChangeEditor:c,editorState:i})}),n&&n._id&&(0,m.jsx)(L,{currentNote:n,onChangeEditor:c,editorState:i})]})},P=function(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"app-wrap-note",children:(0,m.jsx)(A,{})}),(0,m.jsx)("div",{className:"app-wrap-editor",children:(0,m.jsx)(F,{})})]})},B=function(){return(0,m.jsx)(o.Z5,{children:(0,m.jsx)(o.AW,{path:i.AUTHENTICATE.NOTES,element:(0,m.jsx)(P,{})})})},M=function(e){(0,s.Z)(e);var n=(0,u.v9)((function(e){return e.loginReducer.isLogged})),t=(0,o.s0)();return(0,r.useEffect)((function(){n||t(c())}),[]),n?(0,m.jsx)(B,{}):null};var W=function(){return(0,m.jsxs)(o.Z5,{children:[(0,m.jsx)(o.AW,{path:"".concat(i.AUTHENTICATE.PREFIX,"/*"),element:(0,m.jsx)(M,{})}),(0,m.jsx)(o.AW,{path:i.LOGIN,element:(0,m.jsx)(g,{})}),(0,m.jsx)(o.AW,{path:i.HOME,element:(0,m.jsx)(g,{})})]})}},950:function(){},6601:function(){},9214:function(){},8623:function(){},7748:function(){},5568:function(){},6619:function(){},7108:function(){},2361:function(){},4616:function(){}}]);
//# sourceMappingURL=211.216fd85d.chunk.js.map